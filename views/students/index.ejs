<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Students</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <%- include('../partials/header') %>
  <main class="container">
    <h2>Students</h2>
    <form class="filters" method="get">
      <input type="text" name="search" value="<%= search %>" placeholder="Search name, email, interests">
      <select name="cohort">
        <option value="">All Cohorts</option>
        <option value="Year 1" <%= cohort==='Year 1'?'selected':'' %>>Year 1</option>
        <option value="Year 2" <%= cohort==='Year 2'?'selected':'' %>>Year 2</option>
      </select>
      <button>Filter</button>
    </form>

    <table>
      <thead><tr><th>Name</th><th>Email</th><th>Cohort</th><th></th></tr></thead>
      <tbody>
        <% if (students.length === 0) { %>
          <tr><td colspan="4"><em>No students match your search.</em></td></tr>
        <% } %>
        <% students.forEach(function(s){ %>
          <tr>
            <td><a href="/students/<%= s.id %>"><%= s.firstName %> <%= s.lastName %></a></td>
            <td><%= s.email %></td>
            <td><%= s.cohort %></td>
            <td class="actions">
              <a href="/students/<%= s.id %>/edit">Edit</a>
              <form method="post" action="/students/<%= s.id %>?_method=DELETE" onsubmit="return confirm('Delete this student?');">
                <button>Delete</button>
              </form>
            </td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  </main>
  <%- include('../partials/footer') %>
</body>
</html>
